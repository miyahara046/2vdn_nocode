<?xml version="1.0" encoding="utf-8" ?>
<popup:Popup
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:popup="clr-namespace:CommunityToolkit.Maui.Views;assembly=CommunityToolkit.Maui"
    x:Class="_2vdm_spec_generator.View.TimeoutPopup">

    <Grid>

        <!-- 背景の半透明オーバーレイ（タップを消費するため TapGesture を追加） -->
        <BoxView Color="#80000000" HorizontalOptions="Fill" VerticalOptions="Fill">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnBackgroundTapped" NumberOfTapsRequired="1" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- 中央のポップアップ本体（縦幅を広めに設定） -->
        <Frame
            Padding="0"
            CornerRadius="8"
            BackgroundColor="White"
            HasShadow="True"
            WidthRequest="450"
            HeightRequest="300"
            HorizontalOptions="Center"
            VerticalOptions="Center">

            <!-- 上部をやや広め、下部はボタン領域として確保 -->
            <Grid RowDefinitions="0.75*,0.25*" ColumnDefinitions="*">

                <!-- 上部コンテンツ -->
                <VerticalStackLayout Grid.Row="0" Padding="16" Spacing="10">
                    <Label Text="タイムアウト設定" FontAttributes="Bold" FontSize="18" HorizontalOptions="Start" />
                    <Label Text="秒数を入力してください（正の整数）" FontSize="13" TextColor="Black" HorizontalOptions="Start" />
                    <Entry x:Name="SecondsEntry"
                           Placeholder="例: 10"
                           Keyboard="Numeric"
                           BackgroundColor="White"
                           TextColor="Black"
                           HorizontalOptions="FillAndExpand"
                           HeightRequest="44" />

                    <Label Text="遷移先を入力してください" FontSize="13" TextColor="Black" HorizontalOptions="Start" />
                    <Entry x:Name="TargetEntry"
                           Placeholder="遷移先（例: 画面A）"
                           BackgroundColor="White"
                           TextColor="Black"
                           HorizontalOptions="FillAndExpand"
                           HeightRequest="44" />
                </VerticalStackLayout>

                <!-- 下部（グレー領域） -->
                <BoxView Grid.Row="1" Color="#F0F0F0" />

                <!-- グレー領域内に中央寄せで横幅を揃えたボタン（Gridで等分） -->
                <Grid Grid.Row="1"
                      HorizontalOptions="Center"
                      VerticalOptions="Center"
                      ColumnDefinitions="*,*"
                      ColumnSpacing="12"
                      Padding="8"
                      WidthRequest="320"> <!-- 必要に応じてここで全体幅を調整 -->

                    <Button Grid.Column="0"
                            Text="OK"
                            Clicked="OnConfirmClicked"
                            BackgroundColor="White"
                            TextColor="Black"
                            CornerRadius="6"
                            BorderColor="#CCCCCC"
                            BorderWidth="1"
                            Padding="12,8"
                            HorizontalOptions="FillAndExpand" />

                    <Button Grid.Column="1"
                            Text="キャンセル"
                            Clicked="OnCancelClicked"
                            BackgroundColor="White"
                            TextColor="Black"
                            CornerRadius="6"
                            BorderColor="#CCCCCC"
                            BorderWidth="1"
                            Padding="12,8"
                            HorizontalOptions="FillAndExpand" />
                </Grid>

            </Grid>
        </Frame>
    </Grid>
</popup:Popup>
